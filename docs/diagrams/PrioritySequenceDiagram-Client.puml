@startuml
!include style.puml
skinparam ArrowFontStyle plain

box Logic LOGIC_COLOR_T1
participant "p:PriorityCommand" as PriorityCommand LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant ":Model" as Model MODEL_COLOR
participant "oldClient:Client" as oClient MODEL_COLOR
participant "newClient:Client" as nClient MODEL_COLOR
end box

[-> PriorityCommand : execute(index)
activate PriorityCommand
loop while indexes is not empty
PriorityCommand -> Model
activate Model
Model -> Model : getFilteredClientList()
activate Model
Model --> Model
deactivate Model
Model --> PriorityCommand
deactivate Model

PriorityCommand -> oClient : getClientFromIndex(index)
activate oClient
oClient --> PriorityCommand
deactivate oClient

create nClient
PriorityCommand -> nClient : togglePriority(oldClient)
activate nClient
nClient --> PriorityCommand
deactivate nClient

PriorityCommand -> Model
activate Model
Model -> Model : setClient(oldClient, newClient)
activate Model
Model --> Model
deactivate Model
Model --> PriorityCommand
deactivate Model

PriorityCommand -> Model
activate Model
Model -> Model : updateFilteredClientList
activate Model
Model --> Model
deactivate Model
Model --> PriorityCommand
deactivate Model
end
[<--PriorityCommand
deactivate PriorityCommand
@enduml
